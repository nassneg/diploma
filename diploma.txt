ВКР
!!!Введение
Процессы - это ядро бизнеса. Они существуют в каждом отделе и команде, и они имеют решающее значение для результатов операций. Вы можете думать о бизнес-процессах как о проекте, который определяет пути и поток действий, которые выполняются внутри и между различными бизнес-функциями. Но перемещение из точки «А» в точку «В» по этим путям и максимально эффективное выполнение этого не происходит без усилий. Требуется время, ресурсы и немного хорошего планирования, чтобы убедиться, что ваш план в порядке, а работа идет гладко. Вот где управление бизнес-процессами вступает в игру. Управление бизнес-процессами (BPM) - это практика проектирования, выполнения, мониторинга и оптимизации бизнес-процессов. Это методология (а не продукт), которая может превратить ваш бизнес в хорошо смазанную машину. Сделано правильно, это также выполняется с целью постоянного улучшения. Автоматизация возможна с помощью таких инструментов, как программное обеспечение BPM, которое поддерживает разработку приложений технологических решений для выполнения бизнес-процессов.
Одним из таких инструментов является Cloud Platform ServiceNow. Основное предложение ServiceNow — это готовая платформа, которая позволяет бизнесу упростить и автоматизировать рутинные рабочие задачи и обеспечить плавное выполнение проектов с использованием единой модели данных. Сервис построен на инструментальной панели управления событиями (Event Management Dashboard), наглядно отображая состояние каждого элемента в сфере ИТ компании и предлагая быстрый доступ к различным решениям. Это максимально абстрактное понятие включает возможность организовать любую необходимую работу, будь то обмен данными между сотрудниками, клиентская поддержка, ведение базы данных и документации. Гибкая система настроек помогает организовать работу для любого типа бизнеса, в любой среде, где есть доступ к интернету. Ключевым фактором является то, что SN может стать отличным инструментом для конфигурации бизнес процессов, связанных с электронным документооборотом, так как обладает почти всеми ресурсами для этого:

Легко делитесь цифровыми документами с нужными работниками знаний.
Централизованная организация документов в стандартизированных файловых структурах и форматах.
Хранение и доступ к информации для более эффективного использования.
Защита документов в соответствии со стандартизированными правилами соответствия.
Благодаря централизации использования и доступа к информации управление документами является центром, в котором можно подключать и развертывать более широкие стратегии управления информацией, такие как ECM, управление записями и автоматизация бизнес-процессов.
Но к сожалению, для того чтобы полностью полагаться на возможности платформы, необходимо внедрить преобразование бумажных документов в цифровые активы.

возможность использовать REST API


















!!!Постановка задачи
    //



Теория
  Особенности Cloud Platform Service Now
      Основное предложение ServiceNow — это готовая платформа, которая позволяет бизнесу упростить и автоматизировать рутинные рабочие задачи и обеспечить плавное выполнение проектов с использованием единой модели данных.  !!! Дополнить

      Модули ServiceNow, использованные мной в процессе решения возникающих задач:
        1. Business Rules — это серверный код, который запускается, когда запись отображается, вставляется, обновляется или удаляется, или когда запрашивается таблица. В основном их принято использовать для выполнения задач, таких как автоматическое изменение значений в полях формы при соблюдении определенных условий, или для создания триггеров для отправки уведомлений по почте и других подобных действий. В интеграции используется для отправки REST запроса, получение ответа от сервера в виде JSON объекта и дальнейшей работы с ним. Триггером служит добавление изображения на форму.
        2. Script Includes используются для хранения JavaScript кода, который работает на сервере. Каждая запись хранит функции и классы для использования в серверном коде. Каждый Script Include определяет либо класс объекта, либо функцию. Чтобы не перегружать существующий Business Rule кодом, кодирование изображения в BASE64 и формирование тела JSON запроса было решено вынести в Script Include отдельным классом.
        !3. REST (Representational State Transfer) представляет собой архитектуру, обеспечивающую связь между компьютерными системами в Интернете, облегчая для них взаимодействие друг с другом. Платформа Now предоставляет различные REST API, которые по умолчанию активны. Эти API предоставляют возможность взаимодействия с различными функциями ServiceNow в вашем приложении. Такая функциональность включает в себя возможность выполнения операций создания, чтения, обновления и удаления в существующих таблицах, вставки данных, извлечения информации и запуска преобразований для базы данных.
        4. Client Scripts позволяют системе запускать JavaScript на клиенте (веб-браузере), когда происходят клиентские события, например, когда форма загружается, после отправки формы или когда поле меняет значение. С помощью Client Script реализована интеграция с библиотекой Tesseract.js.
        5.Service Portal — это один из многочисленных модулей ServiceNow, который позволяет разработчикам и администраторам создавать по-настоящему удобный пользовательский интерфейс, с интуитивно понятным управлением. Он взаимодействует с существующими компонентами ServiceNow, поэтому пользователи могут получать доступ к определенным функциям платформы с помощью него.
        6. UI Scripts предоставляют возможность не только хранить клиентский JavaScript код, но и запускать его «из браузера», встраивать в HTML код страницы. Принцип работы схож с «Script Includes», только при-меняется не для серверного, а для клиентского кода. В рамках поставленной задачи используется для хранения библиотек Tesseract.js и Spell-checker.js
        7. UI Pages могут использоваться для создания и отображения форм, диалоговых окон, списков и других компонентов пользовательского интерфейса.
        8. Performance Analytics - это платформенное решение для оптимизации процессов, позволяющее создавать информационные панели управления, составлять отчеты по KPI и метрикам, а также отвечать на ключевые бизнес-вопросы, помогая повысить качество и сократить расходы на предоставление услуг.

    Преимущества использования сервиса:
      • Платформа позволяет разрабатывать с использованием новейших веб-технологий и поддерживает интеграцию со сторонними приложениями. Служба поддержки клиентов ServiceNow эффективно решает любые вопросы / заявки.
      • Для того чтобы иметь доступ к личному экземпляру платформы, необходимо лишь создать учётную запись на официальном портале.
      • ServiceNow отлично справляется с большинством административных обязанностей, включающих в себя документирование и организацию проектных задач, обеспечивая своевременную связь и соблюдение всех нюансов и тонкостей. Данное преимущество позволяет автоматизировать рутинные бизнес-процессы (создание запросов, отчётов, ведение учёта времени) и тем самым сохранить время для по-настоящему важных дел, например для создания итогового продукта.



  Анализ существующих OCR сервисов.
    OCR расшифровывается как «Оптическое распознавание символов». Это процесс преобразования изображения в машинный код. Например, мы можем получить отсканированное изображение книги и использовать технологию распознавания текста, чтобы прочитать изображение и вывести текст в формате, который мы можем использовать на любом вычислительном устройстве.
    Критерии по которым оценивались предложенные на рассмотрение сервисы:
      1. Качество распознанного текста;
      2. Экономическая обоснованность;
      3. Возможность интегрирования в платформу;
      4. Распознавание текста, включающего в себя более одного языка;

    Tesseract JS
      Tesseract.js - JavaScript библиотека для распознавания текста на изображениях, поддерживающая огромное количество языков, включая русский и английский языки.
      Преимущества
        1. Автоматическая ориентация текста;
        2. Открытый код;
        3. Бесплатное использование;
        4. Доступный интерфейс для определения пространственных границ слов, абзацев;
        5. Может работать как в браузере, так и на сервере с NodeJS;
      Недостатки
        1. Невозможность распознавания текста, включающего в себя более одного языка;
      Вывод
        На первый взгляд, эта библиотека является лучшим решением для распознавания чеков, так как возможность запускать скрипты "на клиентской части" является выигрышной при интеграции с платформой ServiceNow. Также стоит отметить, что с экономической точки зрения выгодно использовать этот инструмент, потому что он не требует дополнительных вложений (например приобретения подписки). Но несмотря на превалирующие достоинства, неспособность распознавать более одного языка одновременно препятствует получению хорошего результата.

    ABBYY Cloud OCR FineReader Engine
      ABBYY FineReader Engine – многофункциональный инструментарий разработчика, который позволяет встраивать в приложения интеллектуальные технологии распознавания данных. С помощью OCR на основе технологий искусственного интеллекта вы можете создавать приложения с функциями качественного распознавания информации из документов, изображений, фотографий, скриншотов, мониторов и дисплеев, определения типа документа, конвертации сканированных документов в файлы форматов Word, Excel и PDF с возможностью поиска.
      Преимущества
        1. Высокая точность распознавания;
        2. Полный спектр технологий распознавания;
        3. Инструменты для обработки PDF;
        4. Поддержка множества языков;
        5. Распознавание текста, включающего в себя более одного языка;

      Недостатки
        1. Высокая стоимость подписки;

      Вывод
        Данный сервис показывает высокое качество распознанного текста. Также стоит отметить удобство при работе с интеграцией: клиентская программа, передавая изображения с помощью одного или нескольких POST-запросов, формирует задание на сервере. После того, как задание сформировано, необходимо отправить его на обработку, указав настройки обработки. Кроме того, автоматическое определение языка позволяет сервису распознавать разноязычный текст, что делает его выигрышным по сравнению с Tesseract.js. Единственным недостатком становится ощутимая плата за использование данного инструмента, что делает выбор данного инструмента экономически нерациональным.


    !!!Google Vision AI
      !!!API Google Cloud Vision предлагает мощные предварительно обученные модели машинного обучения с помощью API REST и RPC. &&Назначьте ярлыки изображениям и быстро классифицируйте их по миллионам предварительно определенных категорий. Обнаружение объектов и лиц, чтение печатного и рукописного текста и создание ценных метаданных в вашем каталоге изображений.
      Преимущества
          1. Высокая точность распознавания;
          2. Простота использования;
          3. Распознавание текста, включающего в себя более одного языка;
          4. Бесплатное использование на протяжении года;
          5. Поддержка множества языков;
      Недостатки
          1. Ограниченное количество бесплатных запросов в месяц
      Вывод
        Google Vision AI обладает всеми преимуществами рассмотренного ранее ABBYY Cloud OCR SDK сервиса. Тестовые прогоны картинок показали сопоставимые результаты. Также схожи принципы передачи изображения в рассмотрение с помощью POST-запросов. Главным достоинством данного инструмента является возможность на протяжении года использовать сервис без каких либо денежных вложений, но с ограниченным количеством запросов в месяц. Поэтому было принято решение использовать данный сервис для поставленных задач.



  !!!Анализ и классификация чеков
  Ключевая информация, содержащаяся в чеках:
    название документа;
    порядковый номер, присвоенный ему во время смены;
    номер самой смены;
    используемая предпринимателем или компанией система налогообложения;
    совершаемая операция (продажа или его возврат);
    место, дата и время проведения расчёта;
    должность и Ф. И. О. лица, принимающего деньги;
    номер ФН, присвоенный производителем и зафиксированный во время регистрации в ФНС;
    название каждого приобретённого покупателем товара с учётом его количества, цены и скидки;
    другие данные.

  54-ФЗ устанавливает два вида кассовых чеков: обычный (на бумаге) и электронный.


Реализация
  !!!Создание таблиц с расходами, настройка доступов и ролей

  Реализация распознавания текста с помощью библиотеки Tesseract JS:
    При работе с данной библиотекой были воспроизведены следующие шаги:
      1.	Локальное добавления библиотеки Tesseract.js
        Для того чтобы использовать возможности JS библиотеки для распознавания текста внутри ServiceNow платформы необходимо:
          1. Выгрузить файл с исходным кодом библиотеки, перейдя по указанной ссылке https://unpkg.com/tesseract.js@v2.0.0-alpha.13/dist/tesseract.min.js ;
          2. Создать в платформе в разделе UI Script глобальную запись "OCR";
          3. В поле "Script" добавить исходный код из скачанного ранее файла;
      2.	Конфигурация и настройка таблицы Images [db_images] (добавление недостающих полей на форму)
      3.	Создание Client Scripts записи, в которой описана логика распознавания текста
         !!!с помощью метода recognize объекта Tesseract: Этот метод принимает файл, язык и объект настроек с логгером. Метод работает асинхронно и возвращает обычный Promise.
      4. Отображение прогресса и результата
        В результате работы Recognize метода мы получаем необходимый текст

      UX
        Логика описана в блок-схеме, её надо подробнее расписать

      UI
          Работа с Сервис порталом
          AJAX
          HTML
          Jelly

    Выводы
      Tesseract.js – отличная JS-библиотека для распознавания текста с изображений. Конечно, её возможности сильно ограничены. Зашумлённый фон и нестандартные шрифты существенно снижают точность обработки. Однако для множества проектов она может стать замечательным решением.

  Реализация распознавания текста с помощью Google Vision AI
    Внедрение Google Cloud API
      Чтобы использовать API, необходимо воспроизвести следующие шаги в Google Cloud Developer Console:
        1. Создать проект в Google Cloud Console или использовать уже существующий;
        2. Включить в проекте Billing. Если это первое использование Google Cloud Console, необходимо начать бесплатный пробный период использования. Будут запрошены данные    карты, но денежные средства будут списывать только в случае превышения лимита запросов;
        3. Включить Google Cloud Vision API;
        4. Далее в меню консоли необходимо перейти в Диспетчер API-учетные данные и создать ключ API, который будет использоваться для тестирования;
        5.


    Формирование JSON request
    Формат json-запроса
Согласно инструкции сервису нужно прислать json с полями requests (массив)  image (объект с полем content где содержится base64-закодированное изображение) и features (массив с указанием нужного типа распознавания type, в данном случае TEXT_DETECTION).  Код, который это делает, можно посмотреть в приложенной внешней обработке. В итоге получается вот такой файл JSON:

{
"requests": [
{
"image": {
"content": "base64 image content"
},
"features": [
{
"type": "TEXT_DETECTION"
}
]
}
]
}
      Кодирование картинки
      Энд поинт
      методы
    Отправка request
    Получение Responce
    Парсинг JSON

  SpellCheck
    логика

    UX
      Логика описана в блоксхеме, её надо подробнее расписать

    UI
      Работа с Сервис порталом
      AJAX
      HTML
      Jelly
Заключение
    //
Литература
      ..





!!!\\Логика распознавания текста:!!! сделать из этого диаграмму
    \begin{itemize}
    \item Так как клиентский скрипт срабатывает по изменению значения в поле OCR language, задаём OnChange Функцию, которая отслеживает эти изменения,
    \item  С помощью метода getScripts подключаем библиотеку,
    \item В метод recognize передаём:
        \begin{itemize}
        \item Ссылку изображения, которая состоит из неизменяемой части 'https://dev103823.service-now.com/' (адрес личного экземпляра платформы) и непосредственно названия изображения,
        \item Язык (передаётся в переменную newValue, когда пользователь выбирает значение в поле "OCR language"),
        \item Объект настроек с логгером.
        \end{itemize}
    \end{itemize}
